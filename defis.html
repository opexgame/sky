<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>D√©fis | Skypuffs Legend</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HEADER -->
  <header class="container header">
    <div class="brand">SKYPUFFS <span>LEGEND</span></div>
    <nav class="nav">
      <div class="dropdown">
        <a href="index.html#roadmap" class="dropbtn">Roadmap ‚ñæ</a>
        <div class="dropdown-content">
          <a href="index.html#roadmap">Roadmap</a>
          <a href="whitepaper.html">White Paper</a>
        </div>
      </div>
      <a href="tokenomics.html">Tokenomics</a>
      <a href="index.html#team">Team</a>
    </nav>
  </header>

  <!-- SECTION DEFIS -->
  <section class="defis container">
    <h1>üöÄ D√©fis Skypuffs</h1>
    <p>
      Compl√®te les missions ci-dessous pour d√©bloquer des r√¥les exclusifs et faire partie de la l√©gende <strong>SkyPuffs</strong>.
    </p>

    <div class="defis-steps">
      <div class="step-card" style="width: 100%; max-width: 800px;">
        <div
          data-zealy-community="skypuffslegend"
          data-variant="inline"
          data-theme="dark"
          data-color="#21b2ff"
          data-quest-id="2e56678a-8cf8-4a52-94ec-238993101181"
        ></div>
      </div>
    </div>

    <div class="back-wrap">
      <a class="btn-back" href="index.html">‚Üê Retour √† l'accueil</a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer container" id="community">
    <a href="https://discord.gg/4jtd8ErJry" target="_blank" aria-label="Discord">
      <img src="assets/discord.svg" alt="Discord" />
    </a>
    <a href="https://x.com/Skypuffss?s=20" target="_blank" aria-label="X (Twitter)">
      <img src="assets/x.svg" alt="X" />
    </a>
    <a href="https://www.instagram.com/acide.art/" target="_blank" aria-label="Instagram">
      <img src="assets/instagram.svg" alt="Instagram" />
    </a>
  </footer>

  <!-- === Zealy === -->
  <script src="https://zealy.io/embed.js"></script>

  <!-- === Correctif forc√© Discord/Twitter === -->
  <script>
    // Fonction pour intercepter tous les clics dans les iframes Zealy
    function interceptZealyLinks() {
      // Recherche de tous les iframes Zealy dans la page
      const iframes = document.querySelectorAll('iframe');

      iframes.forEach(iframe => {
        try {
          // On acc√®de au contenu interne (si autoris√©)
          const doc = iframe.contentDocument || iframe.contentWindow.document;

          // On surveille les clics dans l'iframe
          doc.addEventListener('click', (e) => {
            const target = e.target.closest('a');
            if (target && target.href) {
              const url = target.href;

              // Si le lien m√®ne vers Discord ou Twitter ‚Üí on l'ouvre dans un nouvel onglet
              if (url.includes('discord.com') || url.includes('twitter.com')) {
                e.preventDefault();
                window.open(url, '_blank', 'noopener');
                return false;
              }
            }
          }, true);
        } catch (err) {
          // Erreur normale si Zealy prot√®ge son iframe (sandbox)
        }
      });
    }

    // Surveille les iframes Zealy qui se chargent apr√®s le script
    const observer = new MutationObserver(() => interceptZealyLinks());
    observer.observe(document.body, { childList: true, subtree: true });

    // √âcoute les messages Zealy ‚Üí ouvre Discord/Twitter dans un nouvel onglet
    window.addEventListener("message", (event) => {
      if (typeof event.data === "string") {
        if (event.data.includes("https://discord.com/") || event.data.includes("https://twitter.com/")) {
          window.open(event.data, "_blank", "noopener");
        }
      }
    });
  </script>
</body>
</html>

